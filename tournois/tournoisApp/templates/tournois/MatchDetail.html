{% extends 'base.html' %}

{% block title %}Val's Tournament: Match {{match.Team1.Name}}:{{match.Team2.Name}}{% endblock title %}

{% block head %}
{% load static %}
<link rel="stylesheet" href="{% static 'style.css' %}">
{% endblock head%}

{% block content %}

<nav class="crumbs">
    <ol>
        <li class="crumb"><a href="{% url 'tournament:home' %}">Accueil</a></li>
        <li class="crumb"><a href="{% url 'tournament:tournamentList' %}">Liste des tournois</a></li>
        <li class="crumb"><a href="{% url 'tournament:tournamentDetail' match.Pool.Tournois.id %}">{{match.Pool.Tournois.Name}}</a></li>
        <li class="crumb"><a href="{% url 'tournament:poolDetail' match.Pool.id %}">Poule nÂ°{{match.Pool.index}}</a></li>
        <li class="crumb">{{match.Team1.Name}} VS {{match.Team2.Name}}</li>
    </ol>
</nav>

    <h1>{{match.Team1.Name}} VS {{match.Team2.Name}}</h1>
    <p>Score : <B>{{match.getScoreString}}</B> / Lieu : {{match.Location}} / Date : {{match.Date}} </p>

    {% if user.is_superuser %} <p><a href="{% url 'tournament:editMatch' match.id %}">edit</a></p>{% endif %}
    <p><a href="{% url 'tournament:teamDetail' match.Team1.id %}">{{match.Team1.Name}}</a></p>
    <p><a href="{% url 'tournament:teamDetail' match.Team2.id %}">{{match.Team2.Name}}</a></p>
    {% include "tournois/MapModule.html" with longitude=match.Longitude lattitude=match.Lattitude %}
    {% if match.comment_set.all %}
    <ul>
        {% for Comment in match.comment_set.all%}
        <li>{{Comment}}
            {% if user == Comment.User %}
            <a href="{% url 'tournament:removeComment' Comment.id %}">delete</a>  
            <a href="{% url 'tournament:editComment' Comment.id %}">edit</a>
            {% endif %}    
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>There is no comment on this match</p>
    {% endif %}
    <p>
        {% if user.is_authenticated %}
        <form action="{% url 'tournament:addComment' %}" method='post'>
            {% csrf_token %}
            {{ commentForm }}
            <input type="hidden" name="MatchId" id="MatchId" value={{match.id}}>
            <input type="submit" value="Post the comment">
        </form>
        {% else %}
        vous etes anonymous
        {% endif %}
    </p>

{% endblock content %}