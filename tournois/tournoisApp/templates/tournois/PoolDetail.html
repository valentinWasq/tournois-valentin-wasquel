
{% extends 'base.html' %}

{%load static%}

{% block title %}Val's Tournament : poule {{pool.index}}{% endblock title %}

{% block head %}
{% endblock head%}

{% block content %}
<div class="topbanner">
<nav class="crumbs">
    <ol>
        <li class="crumb"><a href="{% url 'tournament:home' %}">Accueil</a></li>
        <li class="crumb"><a href="{% url 'tournament:tournamentList' %}">Liste des tournois</a></li>
        <li class="crumb"><a href="{% url 'tournament:tournamentDetail' pool.Tournois.id %}">{{pool.Tournois.Name}}</a></li>
        <li class="crumb">Poule n°{{pool.index}}</li>
    </ol>
</nav>

    <div class="topimgElem">
        <img class="topimg" width="300" height="400" src="{% static 'KingJames.jpg' %}">
        <div class="imageCover"></div>
    </div>
    <h1 >{{pool.Tournois.Name}} : pool #{{pool.index}}</h1>
</div>

   

    <div class="midbanner">
        <div class="box" style="width: 70%">
            <h3 class="matchtxt"> Matchs : </h3>
            <div class="scrollableitems">


                {% if pool.match_set.all %}
                <ul>
                
                    {% for match in pool.match_set.all %}
                    <div class="itembox">
                        <li><a class="linka" href= "{% url 'tournament:matchDetail' match.id %}">{{match.Team1.Name}} VS {{match.Team2.Name}}</a></li>
                        <p> Score : {{match.getScoreString}} / Location : {{match.Location}} / Date : {{match.Date}} </p>
                        {% if user.is_superuser %} <a class="linka" href="{% url 'tournament:editMatch' match.id %}">edit</a>{% endif %}
                    </div>
                    <div class="separator">
                    </div>
                
                
                    {% endfor %}
                    {% if user.is_superuser %} 
                    <div class="itembox" style="width: max-content">
                    <li><a class="linka" href="{% url 'tournament:editMatch' 0 %}">create Match</a></li>
                    </div>
                    <div class="separator">
                    </div>
                    {% endif %}
                </ul>
                {% else %}
                    {% if user.is_superuser %}
                        {% if canGenerate %}
                        <a href="{% url 'tournament:generateMatchs' pool.id %}">generate all matchs</a>
                        {% else %}
                        <p>No match and not the right amount of team in the pool</p>
                        {% endif %}
                    {% else %}
                    <p>Aucun match dans cette poule</p>
                    {% endif %}
                    {% if user.is_superuser %} <p><a href="{% url 'tournament:editMatch' 0 %}">create Match</a></p>{% endif %}
                {% endif %}
                </div>
            </div>    
            <div class="borded-box">
        
        
            {% if pool.match_set.all %}
        
            <h3 style="position: relative; 
            text-align: center;
            font-size:50px;
            "> classement </h3>

            <h3 style="position: relative; 
            left: 0px; 
            top: 2px;
            text-align: center;
            "> Points  &nbsp &nbsp   Equipes </h3>
                <ul>
                    {% for team, score in pool.getTeamsAndScores.items %}
                    <li><FONT size="5pt">{{score}}</FONT> &nbsp &nbsp &nbsp <a class="linka" href=" {% url 'tournament:teamDetail' team.id %}">{{team.Name}}</a></li>
                    <div class="separator">
                    </div>
                    {% endfor %}
                </ul>
                {% else %}
                <h3 style="position: relative; 
                text-align: center;
                font-size:50px;
                "> équipes </h3>
                <ul>
                    {% for team in pool.Teams.all %}
                    <li class="link"a><a href="{% url 'tournament:teamDetail' team.id %}">{{team.Name}}</a></li>
                    <div class="separator">
                    </div>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>
        
    </div>



    {% include "src/index.html"%}
    </div>


{% endblock content %}
